<!doctype html>
<html lang="fr">
    
    <head>
        <title>Laboratoire de science</title>
        <link rel="icon" type="image/png" href="favicon.ico"/>
        <meta name="description" content="3D Application">
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="./js/aframe-v1.2.0.min.js"></script>
        <script src="./js/aframe-extras.min.js"></script>
        <script src="./js/aframe-environment-component.min.js"></script>
        <script src="./js/super-hands.js"></script>
        <script src="./js/aframe-animation-timeline-component.min.js"></script>
        <script src="../a-recit-master/arecit/a-recit.js"></script>
        <script src="./js/aframe-proxemic-component.js"></script> 
        
          
        <script src="./js/aframe-gui.js"></script>
        <script src="./js/gui-env.js"></script>
        <script src="./js/aframe-haptics-component.min.js"></script>
        <script type="text/javascript" src="./js/webxr.js"></script>
        <script type="text/javascript" src="./js/joystick.js"></script>
        <script type="text/javascript" src="./js/camera-cube-env.js"></script>
      
        <!-- CSS only -->
        <link rel="stylesheet" type="text/css" href="./style.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css"
          integrity="sha512-5A8nwdMOWrSz20fDsjczgUidUBR8liPYU+WymTZP1lmY9G6Oc7HlZv156XqnsgNUzTyMefFTcsFH/tnJE/+xBg=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
          integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
          crossorigin="anonymous" referrerpolicy="no-referrer" />
        <!-- Custom CSS -->
      <style>
        .a-enter-ar-button, .a-enter-vr-button {
         left:40px;
          top:150px; 
          
          padding:12px;
        }
      </style>
      
      
        <!-- Bootstrap Dependencies -->
        <link rel="stylesheet" href="./bootstrap/bootstrap4.min.css">
        <script src="./bootstrap/jquery-3.2.1.slim.min.js" "></script>
       <script src=" ./bootstrap/popper.min.js"></script>
        <script src="./bootstrap/bootstrap.min.js"></script>
        <link rel="stylesheet" href="./assets/css/style.css" />
      
      
        <!-- ==================== 
          REGISTER OUR COMPONENT
        ========================= -->
      
      
        <script>
         /* window.onload = function recitonload() {
    var scene = document.querySelector('a-scene');
    console.log(scene + "camera 1 activate first");
var plyr = scene.querySelector('a-player');
console.log(plyr + "camera 1 activate first");
plyr.setAttribute('include', "./_player1.html")

}*/
           AFRAME.registerComponent('toggleouverture', {
      schema: {
        clip1: { default: 'default' },
        clip2: { default: 'default' }
      },
      init: function () {
        var data = this.data;
        var el = this.el;

        var ouvert = this.el.getAttribute('animation-mixer');
        

       
        el.addEventListener('press', function () {


          console.log(ouvert);
          if (ouvert.clip == data.clip2) {


            el.setAttribute('animation-mixer', 'clip: ' + data.clip1 + ';loop:once; clampWhenFinished:true;');
            console.log('ouvert');
          }
          else {
            el.setAttribute('animation-mixer', 'clip: ' + data.clip2 + ';loop:once; clampWhenFinished:true;');

            console.log("fermé");
          };
        })
      },


    })
        
        </script>
      
      
      </head>
      
      <body>
      
      
        <div id="aframe">
      
        <a-scene id="a-scene"  
        
          
          animation-timeline__1="timeline: #animnacelle; loop: false; startEvents: monter " 
          animation-timeline__2="timeline: #animnacelle2; loop: false; startEvents: descendre " 
          joystick 
          isMobile
          physics="workerUrl:./js/cannonWorker.min.js; gravity:0 -10 0; debug: true;"
          shadow="enabled:true; type: basic; autoUpdate: true;"
          renderer="colorManagement: false; physicallyCorrectLights: false; precision: mediump; antialias: false; alpha: true; logarithmicDepthBuffer: true; ">
          <a-assets timeout="100000">
           
      
            <img id="floor" preload="true" src="./assets/floor.png">
            <a-asset-item id="b100" preload="true" response-type="arraybuffer" src="./assets/bank/laboratoire/beaker100/b100a_minified.gltf"></a-asset-item>
            <a-asset-item id="eprou1" preload="true" response-type="arraybuffer" src="./assets/bank/laboratoire/eprouvette/eprouvetter.gltf"></a-asset-item>
            <a-asset-item id="cy100" preload="true" response-type="arraybuffer" src="./assets/bank/laboratoire/cylindergraduate2.gltf"></a-asset-item>
            <a-asset-item id="poste" preload="true" response-type="arraybuffer" src="./assets/bank/laboratoire/Poste_travail_1gltf.gltf"></a-asset-item>
            <a-asset-item id="poste-top" preload="true" response-type="arraybuffer" src="./assets/bank/laboratoire/cabinettopd.gltf"></a-asset-item>
            <a-asset-item id="sc-cab1" preload="true" response-type="arraybuffer" src="./assets/bank/laboratoire/minivb3.gltf"></a-asset-item>
            <a-asset-item id="tray" preload="true" response-type="arraybuffer" src="./assets/bank/laboratoire/tray.gltf"></a-asset-item>
            <a-asset-item id="chem1" preload="true" response-type="arraybuffer" src="./assets/bank/laboratoire/chemicals/b1.gltf"></a-asset-item>
            <a-asset-item id="chem2" preload="true" response-type="arraybuffer" src="./assets/bank/laboratoire/chemicals/b2.gltf"></a-asset-item>
            <a-asset-item id="chem3" preload="true" response-type="arraybuffer" src="./assets/bank/laboratoire/chemicals/b3.gltf"></a-asset-item>
            <a-asset-item id="chem4" preload="true" response-type="arraybuffer" src="./assets/bank/laboratoire/chemicals/p1.gltf"></a-asset-item>
            <a-asset-item id="chem5" preload="true" response-type="arraybuffer" src="./assets/bank/laboratoire/chemicals/p2.gltf"></a-asset-item>
            
            <a-asset-item id="erl100" preload="true" response-type="arraybuffer" src="./assets/bank/laboratoire/erlenmeyer.gltf"></a-asset-item>
            </a-assets>
          <a-box id="montcharge23A" height="0.001" width="0.001" depth="0.001""  position=".32 1.5 -1.9"></a-box>
         <a-player   position="-0.5 0 1"  >
          <a-camera capture-mouse wasd-controls 
          raycaster=" objects: [dragndrop] ,[wall], [grabbable], [gui-interactable]; 
          showLine: true;" 
          cursor="rayOrigin:mouse"
          static-body="shape: sphere; sphereRadius: 0.001"
          super-hands="colliderEvent: raycaster-intersection;
                       colliderEventProperty: els;
                       colliderEndEvent:raycaster-intersection-cleared;
                       colliderEndEventProperty: clearedEls;">
            </a-camera>
         </a-player>
          
           
            
      
      
         <a-main> 
          <a-plane floor material="src:#floor; repeat: 700 700; transparent: true;" height="500" width="500"
            rotation="-90 0 0"></a-plane>
          <a-sky color="grey"></a-sky>
          <a-entity light="type: ambient;  intensity: 1"></a-entity>
          
      
         <!-- <a-fluorescent id="flu1" position="0.5 4 4" rotation="90 90 0" intensity="2.5"></a-fluorescent>-->
           <a-laboratory laboratory>
    
            <a-box id="floor" visible="true" floor position="0 -0.05 0" width="40" height="0.01" depth="40" opacity="1"></a-box>
            <a-fluorescent id="flu1" position="0.5 2 0" rotation="90 90 0"  intensity="2.5"></a-fluorescent>
            <a-gltf-model src="#poste" position="0 0 -1" rotation="0 -90 0"></a-gltf-model>
            <a-gltf-model src="#sc-cab1" wall body="type:static; " floor position="-1 0 -0.7" rotation="0 0 0"  visible="true" animation-mixer="clip: openleft; loop:once; clampWhenFinished:true;" toggleouverture="clip1 : open; clip2 : close;"></a-gltf-model>
            
            <a-entity position="0.31 0.94 -0.4">
              <a-image src="./assets/bank/laboratoire/chemicals/sel.jpg" receptacle width="0.1" height="0.1" rotation="-90 0 0" position="-0.1 0.02 0"></a-image>
              <a-gltf-model src="#tray"  rotation="0 0 0"  visible="true" ></a-gltf-model>
          </a-entity>
          <!--<a-entity  rotation="0 0 0" grabbable  position="-1 1.1 -0.8">
          <a-gltf-model src="#chem1"   body="type:kinematic; autoShape:false; restitution:0;"  visible="true" ></a-gltf-model>
        </a-entity>
          <a-gltf-model src="#chem2"   rotation="0 0 0" position="-1.3 1.1 -0.8" shape="cylinder" body="type:kinematic; restitution:0; "  visible="true" ></a-gltf-model>
          <a-gltf-model src="#chem3"  grabbable rotation="0 0 0" position="-1.21 1.1 -0.82" shape="cylinder" body="type:kinematic; restitution:0; " visible="true" ></a-gltf-model>
          <a-gltf-model src="#chem4"  grabbable  rotation="0 0 0" position="-1.4 1.1 -0.8" shape="cylinder" body="type:kinematic; restitution:0; " visible="true" ></a-gltf-model>
          <a-gltf-model src="#chem5"   grabbable rotation="0 0 0" position="-1.5 1.1 -0.8" shape="cylinder" body="type:kinematic; restitution:0; "  visible="true" ></a-gltf-model>-->
            
          <a-reagent id="NaCl" name= "NaCl" rotation="0 0 0" scale="1 1 1" position="-1.12 0.75 -0.8" visible="true"   grabbable="startButtons: click; endButtons: clicl" grabbablea onstate__grabbed=" property:colorliq; on:red; off:green;">
          </a-reagent>
          <a-reagent id="NaCl-1" name= "NaCl"     rotation="0 0 0" scale="1 1 1" position="-1.2 0.75 -0.8" visible="true"   grabbable onstate__grabbed=" property:colorliq; on:red; off:green;">
          </a-reagent> 
            <a-beaker id="becher1a" name= "bécher A" colorliq="olive"  percent=0 volume= "100ml"     opacity="0"  rotation="0 0 0" scale="1 1 1" position="-1.12 0.75 -0.8" visible="true"  dragndrop grabbable onstate__grabbed=" property:colorliq; on:red; off:green;">2
            </a-beaker>
            <a-testtube id="becher1a" name= "eprouvete A" colorliq="olive"  percent=0  opacity="0.0"  rotation="0 0 0" scale="1 1 1" position="-0.9 0.75 -0.8" visible="true" dragndrop grabbable onstate__grabbed=" property:colorliq; on:red; off:green;">2
            
            </a-testtube>
            <a-erlenmeyer id="becher1a" dragndrop name= "erleinmeyer A" colorliq="#FF1493"  percent=0 volume= 0.0 opacity="0.0"  rotation="0 0 0" scale="1 1 1" position="-1.2 0.75 -0.8" visible="true" grabbable onstate__grabbed=" property:colorliq; on:red; off:green;">2
            
            </a-erlenmeyer>
            <a-cylindergraduate id="cylindergraduate1a" dragndrop name= "Cylindre A" colorliq="blue"  percent=0  opacity="0.0"  rotation="0 0 0" scale="0 1 1" p position="-1.282 0.75 -0.8" visible="true" grabbable onstate__grabbed=" property:colorliq; on:red; off:green;">
            
            </a-cylindergraduate>
            <a-beaker id="becher2a" name= "bécher B" dragndrop  colorliq="blue" percent=0 volume= "100ml" opacity="0.0" rotation="0 0 0" scale="1 1 1" position="-0 0.75 -0.8"  visible="true" grabbable onstate__grabbed=" property:colorliq; on:red; off:blue;">
                
            </a-beaker>
        
           
          </a-laboratory >
          </a-main>
      
         
      
        </a-scene>
      </div>
      
      <div class="m-3" style=" background-color: white; position:absolute; top:0; left:0; padding:12px;">
        <form method="post">
          <div class="form-group">
            <label for="select_player_type">Select your mode</label>
            <select class="custom-select custom-select-lg mb-3" id="select_player_type" onchange="select_change()" >
              <option value='./_player1.html'>Computer</option>
              <option value='./_player2.html'>Modile</option>
              <option value='./_player3.html'>occuus Quest 2</option>
             
            </select>
          </div>
          
        </form>
        
 </div>
        <script>
          

    
   
       
        </script>
     
      
      
      
      
      </body>
      
      </html>