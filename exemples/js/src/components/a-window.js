/* global AFRAME, THREE */
Element.prototype.ensure = function (selector, name = selector, attrs = {}, innerHTML = "") {
    let _childEl, attr, val
    _childEl = this.querySelector(selector)
    if (!_childEl) {
      _childEl = document.createElement(name)
      this.appendChild(_childEl)
      for (attr in attrs) {
        val = attrs[attr]
        _childEl.setAttribute(attr, val)
      }
      _childEl.innerHTML = innerHTML
    }
    return _childEl
  }
  
  AFRAME.registerPrimitive("a-window", {
    
    defaultComponents: {
      
      
      rotation: {},
      position:{},
      scale:{},
      injectwindow: {},
      
      
    },
    mappings: {
      
      ouvert: "injectwindow.ouvert",
      color: "injectwindow.color",
    }
  })
  
  
  AFRAME.registerComponent('injectwindow', {
      
      
    schema: {
    
      color:  {  default: "#384f5c" }
      
    }
  ,
    init() { 
      var window = 'data:json/gltf,{"accessors":[{"bufferView":0,"byteOffset":0,"componentType":5126,"count":56,"max":[200.0,100.0,10.5],"min":[-1.9721522630525295e-31,0.0,-10.5],"type":"VEC3"},{"bufferView":1,"byteOffset":0,"componentType":5126,"count":56,"type":"VEC3"},{"bufferView":2,"byteOffset":0,"componentType":5126,"count":56,"type":"VEC2"},{"bufferView":3,"byteOffset":0,"componentType":5123,"count":144,"type":"SCALAR"},{"bufferView":4,"byteOffset":0,"componentType":5126,"count":30,"max":[195.0,95.0,0.0],"min":[5.0,5.0,-1.0],"type":"VEC3"},{"bufferView":5,"byteOffset":0,"componentType":5126,"count":30,"type":"VEC3"},{"bufferView":6,"byteOffset":0,"componentType":5126,"count":30,"type":"VEC2"},{"bufferView":7,"byteOffset":0,"componentType":5126,"count":30,"type":"VEC2"},{"bufferView":8,"byteOffset":0,"componentType":5123,"count":72,"type":"SCALAR"}],"asset":{"extras":{"created":"Mon Aug 22 12:32:33 2022"},"generator":"Gestaltor 2022.2.3 Tagliatelle Professional","version":"2.0"},"bufferViews":[{"buffer":0,"byteLength":672,"byteOffset":0},{"buffer":0,"byteLength":672,"byteOffset":672},{"buffer":0,"byteLength":448,"byteOffset":1344},{"buffer":0,"byteLength":288,"byteOffset":1792},{"buffer":0,"byteLength":360,"byteOffset":2080},{"buffer":0,"byteLength":360,"byteOffset":2440},{"buffer":0,"byteLength":240,"byteOffset":2800},{"buffer":0,"byteLength":240,"byteOffset":3040},{"buffer":0,"byteLength":144,"byteOffset":3280}],"buffers":[{"byteLength":3424,"uri":"data:application/octet-stream;base64,AACgQAAAoEAAAChBAACgQAAAoEAAAChBAACgQAAAoEAAAChBAACgQAAAvkIAAChBAACgQAAAvkIAAChBAACgQAAAvkIAAChBAABDQwAAvkIAAChBAABDQwAAvkIAAChBAABDQwAAvkIAAChBAABDQwAAoEAAAChBAABDQwAAoEAAAChBAABDQwAAoEAAAChBAABIQwAAyEIAAChBAABIQwAAyEIAAChBAABIQwAAyEIAAChBAAAAAAAAyEIAAChBAAAAAAAAyEIAAChBAAAAAAAAyEIAAChBAAAAAAAAAAAAAChBAAAAAAAAAAAAAChBAAAAAAAAAAAAAChBAABIQwAAAAAAAChBAABIQwAAAAAAAChBAABIQwAAAAAAAChBAACgQAAAvkIAACjBAACgQAAAvkIAACjBAACgQAAAvkIAACjBAABDQwAAvkIAACjBAABDQwAAvkIAACjBAABDQwAAvkIAACjBAADIQgAAvkIAAAAnAABDQwAAoEAAACjBAABDQwAAoEAAACjBAABDQwAAoEAAACjBAABDQwAASEIAAAAnAACgQAAAoEAAACjBAACgQAAAoEAAACjBAACgQAAAoEAAACjBAADIQgAAoEAAAAAnAACgQAAASEIAAAAnAAAAAAAAyEIAACjBAAAAAAAAyEIAACjBAAAAAAAAyEIAACjBAAAAAAAAAAAAACjBAAAAAAAAAAAAACjBAAAAAAAAAAAAACjBAACAjAAASEIAAAAnAABIQwAAAAAAACjBAABIQwAAAAAAACjBAABIQwAAAAAAACjBAADIQgAAAAAAAAAnAABIQwAAyEIAACjBAABIQwAAyEIAACjBAABIQwAAyEIAACjBAABIQwAASEIAAAAnAADIQgAAyEIAAAAnAAAAAAAAAAAAAIA/AAAAAAAAgD8AAACA//9/PwAAAAAAAACAAAAAAAAAgL8AAACAAAAAAAAAAAAAAIA///9/PwAAAAAAAACA//9/vwAAAAAAAACAAAAAAAAAgL8AAACAAAAAAAAAAAAAAIA///9/vwAAAAAAAACAAAAAAAAAAAAAAIA/AAAAAAAAgD8AAACAAAAAAAAAAAAAAIA/AAAAAP//fz8AAACAAACAPwAAAAAAAACAAACAv/s/jgmmnk0JAAAAAAAAAAAAAIA/AAAAAP//fz8AAACAAACAv/s/jommnk0J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"}],"materials":[{"doubleSided":true,"name":"Coating - Black Oxide","pbrMetallicRoughness":{"baseColorFactor":[0.1725490242242813,0.1725490242242813,0.1725490242242813,1.0],"roughnessFactor":0.5527864098548889}},{"alphaCutoff":1.0,"alphaMode":"BLEND","doubleSided":true,"name":"Architectural Glass","pbrMetallicRoughness":{"baseColorFactor":[1.0,1.0,1.0,0.15199999511241913]}}],"meshes":[{"name":"Body1","primitives":[{"attributes":{"NORMAL":1,"POSITION":0,"TEXCOORD_0":2},"indices":3,"material":0,"mode":4}]},{"name":"Body2","primitives":[{"attributes":{"NORMAL":5,"POSITION":4,"TEXCOORD_0":6,"TEXCOORD_1":7},"indices":8,"material":1,"mode":4}]}],"nodes":[{"mesh":0,"name":"Body1","scale":[10.0,10.0,10.0]},{"mesh":1,"name":"Body2","scale":[10.0,10.0,10.0]},{"children":[0,1],"name":"asset_base_id:01c185cd-b988-4521-9899-5f9b9f07c48f asset_type:m","rotation":[0.0,0.7071068286895752,0.0,0.7071068286895752],"scale":[0.0010000000474974513,0.0010000000474974513,0.0010000000474974513]}],"scene":0,"scenes":[{"name":"Scene","nodes":[2]}]}'
      this.el.ensure(".dad", "a-gltf-model", {
        "src": window,
       
       
      })
        
        
          this.el.setAttribute("shape","cylinder")
          this.el.setAttribute("body", "type", "static")
          this.el.setAttribute("body", "restitution", "0")
          },
      /*console.log(this.el)
      this.el.innerHTML = `<a-light type="point"  0" intensity="`+this.data.intensity+`" penumbra="0.5"></a-light>`
          },*/
    update(oldData) {
      
    },
  
    tick(time, timeDelta) {
    }
  })
  
    
    
    
    
  
  
    

