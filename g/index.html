<!DOCTYPE html>
<html>
    <head>
        <title>Escape Room - Prototype</title>
        <script src="./libs/aframe/aframe.min.js"></script>
        <!-- for animations from your glTF mode we need the animation-mixer component from aframe-extras -->
        <script src="./libs/animation-mixer.js"></script>
        <script src="./libs/csg/csg.js"></script>
        <script src="./libs/utils.js" ></script>
        <script src="./libs/physics.js" ></script>
        <script src="./libs/physx.release.js" ></script>
       <!--  <script src="./libs/player-move.js" ></script>
        <script src="./libs/controller-listener.js" ></script><script src="./libs/cmdCodec.js" ></script>-->
        <script src="./libs/locomotion.js" ></script>
        <script src="./libs/grabbing.js" ></script>
        <script src="./libs/grabbing/button.js" ></script>
        <script src="./libs/grabbing/grabbable.js" ></script>
        <script src="./libs/grabbing/receptacle.js" ></script>
        <script src="./libs/ensureElement.js" ></script>
        <script src="./libs/copyWorldPosRot.js" ></script>
        <script src="./libs/pools.js" ></script>
        <script src="./libs/betterRaycaster.js" ></script>
        
        <!--<script src="./libs/cannon.js" ></script>-->
        <script src="./libs/touchGestures.js" ></script>
        <script src="./escaperoom.js" ></script>
      </head>
      
      <body>
        
        <a-scene stats 
        physx="autoLoad: true; delay: 1000; wasmUrl: ./libs/physx.release.wasm; useDefaultScene: false; wrapBounds: true;"
        physx-contact-event
        >
           
            <a-assets>
                <a-asset-item id="poste-top" preload="true" response-type="arraybuffer"
                src="./assets/t2.gltf"></a-asset-item>
             </a-assets>
             <!--    <a-asset-item id="baril1" preload="true" response-type="arraybuffer" src="./assets/baril1.gltf"></a-asset-item>
                <a-asset-item id="baril2" preload="true" response-type="arraybuffer" src="./assets/baril2.gltf"></a-asset-item>
                <a-asset-item id="baril3" preload="true" response-type="arraybuffer" src="./assets/baril3.gltf"></a-asset-item>
                <a-asset-item id="baril4" preload="true" response-type="arraybuffer" src="./assets/baril4.gltf"></a-asset-item>
            -->
           
           <a-player locomotion grabbing position=" 1 .01 -4"
         >          <a-box cursor="rayOrigin: mouse" raycaster="far: 100; objects: .clickable;" 
           physx-body="type: kinematic; emitCollisionEvents:true;"
           width="0.5" depth="0.5" height="1.5"
           position = "0 0 0"
           color = "#BBBBBB"
          >     
        </a-box>  
     </a-player>
       
                    
<a-box physx-body="type: static;" 

         class="environmentGround"
           position="0 -0.65 -2.3"
           width="100" depth="100" height="0.1"
           material="src: #crate; repeat: 10 10;"
           shadow="receive: true;"
           floor>
  </a-box>
           

            <a-escaperoom position="0 3 0" width="18" height="6" thickness="0.2">
                <a-escaperoom-wall wall  src="#texture" color="#F00" side="back"></a-escaperoom-wall>
                <a-escaperoom-wall wall  color="blue" side="left" ></a-escaperoom-wall>
                <a-escaperoom-wall wall  color="green" side="right" doorhole='{"position": "center", "width": 1, "height": 2}'>
                    <a-escape-door gltf-model="url(./assets/portem2c.gltf)" ></a-escape-door>
                    </a-escaperoom-wall>
                <a-escaperoom-wall wall  color="grey" side="front" doorhole='{"position": "center", "width": 1, "height": 2}'>
                  
                    </a-escaperoom-wall>
                    
                
                <a-escaperoom-ceiling floor1 color="black"></a-escaperoom-ceiling>
                <a-escaperoom-floor  floor class="environmentGround "color="yellow"></a-escaperoom-floor>

                
                <a-escaperoom-element solution="true" gltf-model="url(./assets/baril1aa.gltf)"  physx-material="restitution: 0.8;" gltf-entities  physx-body="type: dynamic; emitCollisionEvents:true;" position="-3 0 -7" ></a-escaperoom-element>
                <!--
                    <a-escape-room-element gltf-model="url(./assets/baril1.gltf)" position="-4, -1.5, -5" ></a-escape-room-element>
                <a-escape-room-element gltf-model="url(./assets/baril3.gltf)" position="3, -1.5, -7" ></a-escape-room-element>
                <a-escape-room-element gltf-model="url(./assets/baril4.gltf)" position="4, -1.5, -5" ></a-escape-room-element>
                -->
                <a-sphere physx-body="type: dynamic;" physx-material="restitution: 0.8;"
                        position="1 6 -5" 
                        radius="0.5" 
                        material="src:#ball; color:red;">
                        </a-sphere>

                        <!--<a-gltf-model physx-body="type: static;" floor src="./assets/t2a.gltf"  position="1 -3 -8.5" rotation="0 0 0"></a-gltf-model>-->
                        <a-gltf-model physx-body="type: dynamic;" grabbable src="./assets/Becher100.gltf"  position="1.1 -1 -8.5" rotation="0 0 0"></a-gltf-model>
                <!--

                <a-escape-room-element gltf-model="#baril1" position="-4, -1.5, -5" ></a-escape-room-element>
                <a-escape-room-element gltf-model="#baril2" solution="true"  position="-3, -1.5, -7" ></a-escape-room-element>
                <a-escape-room-element gltf-model="#baril3" position="3, -1.5, -7" ></a-escape-room-element>
                <a-escape-room-element gltf-model="#baril4" position="4, -1.5, -5" ></a-escape-room-element>
                -->
            </a-escaperoom>
            <a-escaperoom position="18   3 0" width="18" height="6" thickness=".2">
                <a-escaperoom-wall wall  src="#texture" color="#F00" side="back"></a-escaperoom-wall>
                <a-escaperoom-wall wall  color="blue" side="left" ></a-escaperoom-wall>
                <a-escaperoom-wall wall  color="green" side="right" doorhole='{"position": "center", "width": 1, "height": 2}'>
                    <a-escape-door gltf-model="url(./assets/door.gltf)" ></a-escape-door>
                    </a-escaperoom-wall>
                <a-escaperoom-wall wall  color="grey" side="front" doorhole='{"position": "center", "width": 1, "height": 2}'>
                 
                    </a-escaperoom-wall>
                    
                
                <a-escaperoom-ceiling floor1 color="black"></a-escaperoom-ceiling>
                <a-escaperoom-floor  floor class="environmentGround "color="yellow"></a-escaperoom-floor>

                
                <a-escaperoom-element solution="true" gltf-model="url(./assets/baril2.gltf)"  physx-material="restitution: 0.8;" gltf-entities  physx-body="type: dynamic; emitCollisionEvents:true;" position="-3, 0, -7" ></a-escaperoom-element>
                <!--
                    <a-escape-room-element gltf-model="url(./assets/baril1.gltf)" position="-4, -1.5, -5" ></a-escape-room-element>
                <a-escape-room-element gltf-model="url(./assets/baril3.gltf)" position="3, -1.5, -7" ></a-escape-room-element>
                <a-escape-room-element gltf-model="url(./assets/baril4.gltf)" position="4, -1.5, -5" ></a-escape-room-element>
                -->
                <a-sphere physx-body="type: dynamic;" physx-material="restitution: 0.8;"
            position="1 6 -5" 
            radius="0.5" 
            material="src:#ball; color:red;">
            </a-sphere>


                <!--
                <a-escape-room-element gltf-model="#baril1" position="-4, -1.5, -5" ></a-escape-room-element>
                <a-escape-room-element gltf-model="#baril2" solution="true"  position="-3, -1.5, -7" ></a-escape-room-element>
                <a-escape-room-element gltf-model="#baril3" position="3, -1.5, -7" ></a-escape-room-element>
                <a-escape-room-element gltf-model="#baril4" position="4, -1.5, -5" ></a-escape-room-element>
                -->
            </a-escaperoom>

            <a-sky color="#FFF"></a-sky>
        
        </a-scene>
      </body>
</html>
